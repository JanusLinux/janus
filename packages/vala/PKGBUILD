# Maintainer: protonesso <nagakamira@gmail.com>

pkgname=vala
pkgver=0.42.4
pkgrel=1
pkgdesc="Compiler for the GObject type system"
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'mips64' 'mips' 'ppc64le' 'ppc64' 'ppc')
url="https://wiki.gnome.org/Projects/Vala"
license=('LGPL-2.0-or-later')
depends=('musl' 'glib2' 'pkgconf' 'gcc')
source=("http://ftp.gnome.org/pub/gnome/sources/$pkgname/${pkgver%.*}/$pkgname-$pkgver.tar.xz"
	'no-graphviz.patch')
md5sums=('f34cb465a164ba7f1f2e7fea31f36d13'
         'ace98da4b652e69d88c15d6f27abb7b4')

prepare() {
	cd "$srcdir"/$pkgname-$pkgver
	patch -p1 -i "$srcdir"/no-graphviz.patch
	ACLOCAL= autoreconf -fiv
}

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure \
		--prefix='' \
		--build=$CHOST
	make
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install
}
