# Description: Command line editor library providing generic line editing, history, and tokenization functions
# URL:         http://thrysoee.dk/editline/
# Maintainer:  nee-san, nagakamira at gmail dot com
# Depends on:  ncurses

name=libedit
_pkgver=20180324-3.1
version=${_pkgver/-/_}
release=3
source=("http://thrysoee.dk/editline/$name-${_pkgver}.tar.gz")
BOOTSTRAP=yes

build() {
	cd "$SRC"/$name-${_pkgver}
	./configure $BUILDFLAGS \
		--prefix=/usr \
		--enable-widec
	make
	make DESTDIR="$PKG" install

	mkdir -p "$PKG"/usr/include/readline
	touch "$PKG"/usr/include/readline/tilde.h

	for replace in readline history; do
		ln -sf libedit.so "$PKG"/usr/lib/lib${replace}.so
		ln -sf libedit.a "$PKG"/usr/lib/lib${replace}.a
		ln -sf ../editline/readline.h "$PKG"/usr/include/readline/${replace}.h
	done
}
