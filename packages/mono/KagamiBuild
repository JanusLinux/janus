# Description: Free implementation of the .NET platform including runtime and compiler
# URL:         https://www.mono-project.com/
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  cmake libgdiplus
# Section:     devel

name=mono
version=6.10.0.104
release=1
source=("https://download.mono-project.com/sources/mono/$name-$version.tar.xz")

build() {
	if ! type mono &>/dev/null; then
		export BUILDFLAGS="$BUILDFLAGS --disable-mcs-build"
	fi

	cd "$SRC"/$name-$version
	sed -i 's/touch -f/touch/g' mono/tests/Makefile.am

	autoreconf -fiv
	./configure $BUILDFLAGS \
		--prefix=/usr \
		--sysconfdir=/etc \
		--with-mcs-docs=no
	make
	make DESTDIR="$PKG" install
}
