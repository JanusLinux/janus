# Maintainer: protonesso <nagakamira@gmail.com>

pkgname=libz
pkgver=1.2.8.2015.12.26
pkgrel=1
pkgdesc="A compression/decompression Library"
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'mips64el' 'mipsel' 'ppc64le' 'ppc64' 'ppc')
url="https://sortix.org/libz/"
license=('zlib')
depends=('musl')
source=("https://sortix.org/libz/release/$pkgname-$pkgver.tar.gz")
md5sums=('aa5b869e8f62fdfe7f5ea3168372edb4')

build() {
	cd "$srcdir"/$pkgname-$pkgver
	export CC="gcc"
	export CXX="g++"
	export AR="ar"
	export AS="as"
	export RANLIB="ranlib"
	export LD="ld"
	export STRIP="strip"

	CFLAGS="$CFLAGS -O2" \
	./configure \
		--prefix='' \
		--build=$CHOST
	make
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install
}
