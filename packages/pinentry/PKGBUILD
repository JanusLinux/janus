# Maintainer: protonesso <nagakamira@gmail.com>

pkgname=pinentry
pkgver=1.1.0
pkgrel=1
pkgdesc="Collection of simple PIN or passphrase entry dialogs which utilize the Assuan protocol"
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'ppc64le' 'ppc64' 'ppc')
url="https://gnupg.org/related_software/pinentry/"
license=('GPL2+')
depends=('musl' 'ncurses' 'libcap' 'libassuan' 'libsecret')
source=("https://gnupg.org/ftp/gcrypt/$pkgname/$pkgname-$pkgver.tar.bz2")
md5sums=('3829315cb0a1e9cedc05ffe6def7a2c6')

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure \
		--prefix='' \
		--enable-fallback-curses \
		--enable-libsecret \
		--enable-pinentry-curses \
		--enable-pinentry-emacs \
		--enable-pinentry-tty \
		--disable-pinentry-gnome3 \
		--disable-pinentry-gtk \
		--disable-pinentry-gtk2 \
		--disable-pinentry-qt \
		--build=$CHOST
	make
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install

	ln -sf pinentry-curses "$pkgdir"/bin/pinentry
}
