# Maintainer: protonesso <nagakamira@gmail.com>

pkgname=libarchive
pkgver=3.3.3
pkgrel=1
pkgdesc="Multi-format archive and compression library"
arch=('x86_64' 'x86' 'arm64' 'armv7l' 'armv5tel' 'ppc64le' 'ppc64' 'ppc')
url="http://libarchive.org/"
license=('BSD')
depends=('musl' 'acl' 'bzip2' 'expat' 'libz' 'lz4' 'openssl' 'xz' 'zstd')
source=("http://www.libarchive.org/downloads/$pkgname-$pkgver.tar.gz")
md5sums=('4038e366ca5b659dae3efcc744e72120')

build() {
	cd "$srcdir"/$pkgname-$pkgver
	./configure \
		--prefix='' \
		--without-nettle \
		--without-xml2 \
		--build=$CHOST
	make
}

package() {
	cd "$srcdir"/$pkgname-$pkgver
	make DESTDIR="$pkgdir" install

	ln -sf bsdtar "$pkgdir"/bin/tar
	ln -sf bsdcpio "$pkgdir"/bin/cpio
}
