# Description: Port of the OpenBSD userland to Linux
# URL:         https://github.com/Duncaen/lobase
# Maintainer:  protonesso, nagakamira at gmail dot com
# Priority:    required
# Section:     base

name=lobase
version=c52cc6690301b36ccdc155ffc2c4a8ff29cd92c0
release=1
options=('bootstrap')
source=("https://github.com/Duncaen/lobase/archive/$version.tar.gz")

build() {
	export CFLAGS="$CFLAGS -fcommon"

	cd "$SRC"/$name-$version

	autoreconf -fi
	./configure $BUILDFLAGS \
		--prefix=/usr
	make lib

	for i in diff diff3 cmp sdiff fmt indent ln mknod pr sort stty tsort xinstall; do
		case $i in
			mknod)
				make -C sbin/$i
				make -C sbin/$i install
				;;
			ln|stty)
				make -C bin/$i
				make -C bin/$i install
				;;
			xinstall)
				make -C usr.bin/$i
				;;
			*)
				make -C usr.bin/$i
				make -C usr.bin/$i install
				;;
		esac
	done

	install -Dm755 usr.bin/xinstall/xinstall "$PKG"/usr/bin/install
	install -Dm644 usr.bin/xinstall/install.1 "$PKG"/usr/share/man/man1/install.1
}
