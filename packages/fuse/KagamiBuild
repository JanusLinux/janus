# Description: A library that makes it possible to implement a filesystem in a userspace program
# URL:         https://github.com/libfuse/libfuse
# Maintainer:  protonesso, nagakamira at gmail dot com
# Depends on:  eudev meson fuse-common
# Section:     otherosfs

name=fuse
version=3.9.4
release=1
options=('~emptydirs')
#source=("https://github.com/libfuse/libfuse/releases/download/$name-$version/$name-$version.tar.xz")
source=("https://github.com/libfuse/libfuse/archive/$name-$version.tar.gz")

build() {
	#dir="$name-$version"
	dir="libfuse-$name-$version"

	cd "$SRC"/$dir
	rm -rf build && mkdir -p build && cd build

	meson "$SRC"/$dir \
		--prefix=/usr \
		--sbindir=bin \
		--buildtype=release \
		-Dexamples=false
	ninja
	DESTDIR="$PKG" ninja install

	rm -r "$PKG"/etc/init.d
	rm -r "$PKG"/dev
	rm "$PKG"/etc/fuse.conf
}
