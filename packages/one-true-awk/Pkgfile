# Description: One true awk
# URL:         https://github.com/onetrueawk/awk
# Maintainer:  nee-san, nagakamira at gmail dot com

name=one-true-awk
version=20180827
release=1
source=("https://github.com/onetrueawk/awk/archive/$version.tar.gz")
BOOTSTRAP=yes

build() {
	cd "$SRC"/awk-$version

	if [ "$CROSS" = "yes" ]; then
		patch -Np1 -i "$KEEP"/one-true-awk/cross.patch
		make HOSTCC="$HOSTCC" CC="$CC" CFLAGS="$CFLAGS" a.out
	else
		make CFLAGS="$CFLAGS" a.out
	fi

	install -Dm755 a.out "$PKG"/usr/bin/awk
}
