# Description: Libraries to handle ELF object files and DWARF debugging information
# URL: https://github.com/sabotage-linux/libelf-compat
# Maintainer:  nee-san, nagakamira at gmail dot com

name=libelf
version=0.156c001
release=1
source=("http://ftp.barfooze.de/pub/sabotage/tarballs/libelf-compat-$version.tar.xz")
BOOTSTRAP=yes

build() {
	cd "$SRC"/libelf-compat-$version
	echo "CFLAGS += $CFLAGS -fPIC" > config.mak
	sed -i 's@HEADERS = src/libelf.h@HEADERS = src/libelf.h src/gelf.h@' Makefile

	if [ "$CROSS" = "yes" ]; then
		make HOSTCC="$HOSTCC" CC="$CC"
	else
		make
	fi

	make prefix=/usr DESTDIR="$PKG" install
}
