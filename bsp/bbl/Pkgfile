# Description: RISC-V Proxy Kernel
# URL:         https://github.com/riscv/riscv-pk
# Maintainer:  nee-san, nagakamira at gmail dot com

name=bbl
version=david1
release=1
BOOTSTRAP=yes

build() {
	case $BARCH in
		riscv64|riscv32)
			true
			;;
		*)
			echo "RISC V is supported only"
			exit 1
	esac

	case $BARCH in
		riscv64)
			BBL="bbl64"
			;;
		riscv32)
			BBL="bbl32"
			;;
	esac

	mkdir -p "$PKG"/boot

	cd "$PKG"/boot
	curl ${PKGMK_CURL_OPTS} https://github.com/JanusLinux/storage/raw/master/${BBL}.bin

	mv ${BBL}.bin bbl
}
